<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로봇 제어</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        video {
            width: 80%;
            height: auto;
            border: 1px solid #ccc;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>

<h1>로봇 제어 인터페이스</h1>

<h2>비디오 스트리밍</h2>
<img id="video" src="" alt="비디오 스트리밍" />

<h2>로봇 이동</h2>
<button onclick="move('forward')">앞으로 이동</button>
<button onclick="move('back')">뒤로 이동</button>
<button onclick="move('left')">왼쪽으로 이동</button>
<button onclick="move('right')">오른쪽으로 이동</button>
<button onclick="move('stop')">정지</button>

<h2>속도 조절</h2>
<button onclick="changeSpeed('up')">속도 증가</button>
<button onclick="changeSpeed('down')">속도 감소</button>

<script>
    // 비디오 피드를 가져오기
    const videoElement = document.getElementById('video');
    const faceOn = true;  // 얼굴 인식 활성화
    const drawGestureOn = false;  // 손동작 인식 비활성화

    videoElement.src = `/video_feed/${faceOn}/${drawGestureOn}`;

    // 로봇 이동 명령 보내기
    function move(direction) {
        fetch(`/move/${direction}`, {
            method: 'POST'
        }).then(response => {
            if (response.ok) {
                console.log(`Moved: ${direction}`);
            } else {
                console.error('Error moving robot');
            }
        });
    }

    // 속도 조절 명령 보내기
    function changeSpeed(action) {
        fetch(`/speed/${action}`, {
            method: 'POST'
        }).then(response => {
            if (response.ok) {
                return response.json();
            } else {
                console.error('Error changing speed');
            }
        }).then(data => {
            if (data) {
                console.log(`Current speed: ${data.current_speed}`);
            }
        });
    }
</script>

</body>
</html>
